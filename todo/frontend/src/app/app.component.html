<mat-toolbar color="primary">To‑Do</mat-toolbar>

<main class="container">
  @if (error()) {
    <mat-card class="error-card" appearance="outlined">
      <mat-card-content>{{ error() }}</mat-card-content>
    </mat-card>
  }

  <mat-card class="toolbar" appearance="outlined">
    <mat-card-content>
      <app-todo-filter
        [categories]="categories()"
        [selectedCategoryId]="selectedCategoryId()"
        (selectedChange)="onCategoryChange($event)"
      />
    </mat-card-content>
  </mat-card>

  @if (loading()) {
    <div class="loading">
      <mat-progress-spinner mode="indeterminate" diameter="24"></mat-progress-spinner>
      <span>Caricamento…</span>
    </div>
  }

  <mat-card class="list" appearance="outlined">
    <mat-card-header>
      <mat-card-title>Lista</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <app-todo-list [todos]="todos()" (deleteClicked)="onDelete($event)" />
    </mat-card-content>
  </mat-card>

  <mat-card class="form" appearance="outlined">
    <mat-card-header>
      <mat-card-title>Nuovo To‑Do</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <app-todo-form [categories]="categories()" (submitted)="onCreate($event)" />
    </mat-card-content>
  </mat-card>
</main>
